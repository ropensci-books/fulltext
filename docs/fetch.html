<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 9 Fetch | fulltext manual</title>
  <meta name="description" content="Chapter 9 Fetch | fulltext manual" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 9 Fetch | fulltext manual" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 9 Fetch | fulltext manual" />
  <meta name="github-repo" content="ropensci-books/fulltext" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 9 Fetch | fulltext manual" />
  
  <meta name="twitter:description" content="Chapter 9 Fetch | fulltext manual" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="links.html"/>
<link rel="next" href="chunks.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">fulltext manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> fulltext manual</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#info"><i class="fa fa-check"></i><b>1.1</b> Info</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#citing-fulltext"><i class="fa fa-check"></i><b>1.2</b> Citing fulltext</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.3</b> Installation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#user-interface"><i class="fa fa-check"></i><b>2.1</b> User interface</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>3</b> Data sources</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-sources.html"><a href="data-sources.html#ds-search"><i class="fa fa-check"></i><b>3.1</b> Search</a></li>
<li class="chapter" data-level="3.2" data-path="data-sources.html"><a href="data-sources.html#ds-abstracts"><i class="fa fa-check"></i><b>3.2</b> Abstracts</a></li>
<li class="chapter" data-level="3.3" data-path="data-sources.html"><a href="data-sources.html#ds-link"><i class="fa fa-check"></i><b>3.3</b> Links</a></li>
<li class="chapter" data-level="3.4" data-path="data-sources.html"><a href="data-sources.html#ds-fulltext"><i class="fa fa-check"></i><b>3.4</b> Getting full text</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="authentication.html"><a href="authentication.html"><i class="fa fa-check"></i><b>4</b> Authentication</a></li>
<li class="chapter" data-level="5" data-path="rate-limits.html"><a href="rate-limits.html"><i class="fa fa-check"></i><b>5</b> Rate limits</a></li>
<li class="chapter" data-level="6" data-path="search.html"><a href="search.html"><i class="fa fa-check"></i><b>6</b> Search</a>
<ul>
<li class="chapter" data-level="6.1" data-path="search.html"><a href="search.html#search-usage"><i class="fa fa-check"></i><b>6.1</b> Usage</a></li>
<li class="chapter" data-level="6.2" data-path="search.html"><a href="search.html#search-many-sources"><i class="fa fa-check"></i><b>6.2</b> Search many sources</a></li>
<li class="chapter" data-level="6.3" data-path="search.html"><a href="search.html#search-options"><i class="fa fa-check"></i><b>6.3</b> Search options</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="abstracts.html"><a href="abstracts.html"><i class="fa fa-check"></i><b>7</b> Abstracts</a>
<ul>
<li class="chapter" data-level="7.1" data-path="abstracts.html"><a href="abstracts.html#abstracts-usage"><i class="fa fa-check"></i><b>7.1</b> Usage</a></li>
<li class="chapter" data-level="7.2" data-path="abstracts.html"><a href="abstracts.html#abstracts-by-ids"><i class="fa fa-check"></i><b>7.2</b> By Ids</a></li>
<li class="chapter" data-level="7.3" data-path="abstracts.html"><a href="abstracts.html#abstracts-options"><i class="fa fa-check"></i><b>7.3</b> Abstracts options</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="links.html"><a href="links.html"><i class="fa fa-check"></i><b>8</b> Links</a>
<ul>
<li class="chapter" data-level="8.1" data-path="links.html"><a href="links.html#links-usage"><i class="fa fa-check"></i><b>8.1</b> Usage</a></li>
<li class="chapter" data-level="8.2" data-path="links.html"><a href="links.html#links-options"><i class="fa fa-check"></i><b>8.2</b> Links options</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="fetch.html"><a href="fetch.html"><i class="fa fa-check"></i><b>9</b> Fetch</a>
<ul>
<li class="chapter" data-level="9.1" data-path="fetch.html"><a href="fetch.html#fetch-data-formats"><i class="fa fa-check"></i><b>9.1</b> Data formats</a></li>
<li class="chapter" data-level="9.2" data-path="fetch.html"><a href="fetch.html#how-data-is-stored"><i class="fa fa-check"></i><b>9.2</b> How data is stored</a></li>
<li class="chapter" data-level="9.3" data-path="fetch.html"><a href="fetch.html#fetch-usage"><i class="fa fa-check"></i><b>9.3</b> Usage</a></li>
<li class="chapter" data-level="9.4" data-path="fetch.html"><a href="fetch.html#fetch-errors"><i class="fa fa-check"></i><b>9.4</b> Errors</a></li>
<li class="chapter" data-level="9.5" data-path="fetch.html"><a href="fetch.html#fetch-cleanup"><i class="fa fa-check"></i><b>9.5</b> Cleanup</a></li>
<li class="chapter" data-level="9.6" data-path="fetch.html"><a href="fetch.html#fetch-internals"><i class="fa fa-check"></i><b>9.6</b> Internals</a></li>
<li class="chapter" data-level="9.7" data-path="fetch.html"><a href="fetch.html#fetch-notes"><i class="fa fa-check"></i><b>9.7</b> Notes about specific data sources</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="fetch.html"><a href="fetch.html#elsevier"><i class="fa fa-check"></i><b>9.7.1</b> Elsevier</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chunks.html"><a href="chunks.html"><i class="fa fa-check"></i><b>10</b> Extracting text</a>
<ul>
<li class="chapter" data-level="10.1" data-path="chunks.html"><a href="chunks.html#chunks-usage"><i class="fa fa-check"></i><b>10.1</b> Usage</a></li>
<li class="chapter" data-level="10.2" data-path="chunks.html"><a href="chunks.html#chunks-tabularize"><i class="fa fa-check"></i><b>10.2</b> Tabularize</a></li>
<li class="chapter" data-level="10.3" data-path="chunks.html"><a href="chunks.html#chunks-other-inputs"><i class="fa fa-check"></i><b>10.3</b> Other inputs</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="chunks.html"><a href="chunks.html#files"><i class="fa fa-check"></i><b>10.3.1</b> Files</a></li>
<li class="chapter" data-level="10.3.2" data-path="chunks.html"><a href="chunks.html#xml-in-a-string"><i class="fa fa-check"></i><b>10.3.2</b> xml in a string</a></li>
<li class="chapter" data-level="10.3.3" data-path="chunks.html"><a href="chunks.html#xml2-objects"><i class="fa fa-check"></i><b>10.3.3</b> xml2 objects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="on-disk.html"><a href="on-disk.html"><i class="fa fa-check"></i><b>11</b> Summarize articles on disk</a>
<ul>
<li class="chapter" data-level="11.1" data-path="on-disk.html"><a href="on-disk.html#ft_table-usage"><i class="fa fa-check"></i><b>11.1</b> Usage</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="curl-options.html"><a href="curl-options.html"><i class="fa fa-check"></i><b>12</b> Request debugging/inspection</a></li>
<li class="chapter" data-level="13" data-path="use-cases.html"><a href="use-cases.html"><i class="fa fa-check"></i><b>13</b> Use cases</a></li>
<li class="chapter" data-level="14" data-path="session-info.html"><a href="session-info.html"><i class="fa fa-check"></i><b>14</b> session info</a></li>
<li class="divider"></li>
<li><a href="https://github.com/ropensci-books/fulltext" target="blank">(c) Scott Chamberlain, 2020</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">fulltext manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="fetch" class="section level1">
<h1><span class="header-section-number">Chapter 9</span> Fetch</h1>
<p>The <code>ft_get</code> function makes it easy to fetch full text articles. There are a few different ways to use <code>ft_get</code>:</p>
<ul>
<li>Pass in only DOIs - leave <code>from</code> parameter <code>NULL</code>. This route will first query Crossref API for the publisher of the DOI, then we’ll use the appropriate method to fetch full text from the publisher. If a publisher is not found for the DOI, then we’ll throw back a message telling you a publisher was not found.</li>
<li>Pass in DOIs (or other pub IDs) and use the <code>from</code> parameter. This route means we don’t have to make an extra API call to Crossref (thus, this route is faster) to determine the publisher for each DOI. We go straight to getting full text based on the publisher.</li>
<li>Use <code>ft_search()</code> to search for articles. Then pass that output to this function, which will use info in that object. This behaves the same as the previous option in that each DOI has publisher info so we know how to get full text for each DOI.</li>
</ul>
<p>Note that some publishers are available through other data sources, e.g., through Entrez’s Pubmed.</p>
<p><code>ft_get</code> is a bit complicated. These are just some of the hurdles we’re jumping over:</p>
<ul>
<li>Negotiating various user inputs, likely seeing new publishers we’ve not dealt with</li>
<li>Dealing with authentication and trying to make it easier for users</li>
<li>Users sometimes being at an IP address that has access to a publisher and sometimes not</li>
<li>Caching results to avoid unnecessary downloads if the content has already been acquired</li>
</ul>
<p>Thus, expect some hiccups here, and please do report problems, and if a certain publisher is not supported yet.</p>
<div id="fetch-data-formats" class="section level2">
<h2><span class="header-section-number">9.1</span> Data formats</h2>
<p>You can specify whether you want PDF, XML or plaint text with the <code>type</code> parameter. It is sometimes ignored, sometimes used, depending on the data source. For certain data sources, they only accept one type. Details by data source/publisher:</p>
<ul>
<li>PLOS: pdf and xml</li>
<li>Entrez: only xml</li>
<li>eLife: pdf and xml</li>
<li>Pensoft: pdf and xml</li>
<li>arXiv: only pdf</li>
<li>BiorXiv: only pdf</li>
<li>Elsevier: pdf and plain</li>
<li>Wiley: only pdf</li>
<li>Peerj: pdf and xml</li>
<li>Informa: only pdf</li>
<li>FrontiersIn: pdf and xml</li>
<li>Copernicus: pdf and xml</li>
<li>Scientific Societies: only pdf</li>
<li>Crossref: depends on the publisher</li>
<li>other data sources/publishers: there are too many to cover here - will try to make a helper in the future for what is covered by different publishers</li>
</ul>
</div>
<div id="how-data-is-stored" class="section level2">
<h2><span class="header-section-number">9.2</span> How data is stored</h2>
<p>This depends on what <code>backend</code> value you use. If you use the default (rds) we store all data in <code>.rds</code> files. These are binary compressed files that are specific to R. Because they are specific to R, you don’t want to use this option if part of your downstream workflow is using another tool/programming language.</p>
<p>The three types are stored in differnt ways. xml and plain text are parsed to plain text then stored with whatever backend you choose. However, pdf is retrived as raw bytes and stored as such. Thus, we no longer write pdf files to disk. However, you can easily do that yourself with <code>ft_extract()</code> or yourself by using <code>pdftools::pdf_text</code> which accepts a file path to a pdf or raw bytes.</p>
</div>
<div id="fetch-usage" class="section level2">
<h2><span class="header-section-number">9.3</span> Usage</h2>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="fetch.html#cb58-1"></a><span class="kw">library</span>(fulltext)</span></code></pre></div>
<p>List backends available</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="fetch.html#cb59-1"></a><span class="kw">ft_get_ls</span>()</span></code></pre></div>
<pre><code>#&gt;  [1] &quot;aaas&quot;                &quot;aip&quot;                 &quot;amersocclinoncol&quot;   
#&gt;  [4] &quot;amersocmicrobiol&quot;    &quot;arxiv&quot;               &quot;biorxiv&quot;            
#&gt;  [7] &quot;bmc&quot;                 &quot;cambridge&quot;           &quot;cob&quot;                
#&gt; [10] &quot;copernicus&quot;          &quot;crossref&quot;            &quot;elife&quot;              
#&gt; [13] &quot;elsevier&quot;            &quot;entrez&quot;              &quot;frontiersin&quot;        
#&gt; [16] &quot;ieee&quot;                &quot;informa&quot;             &quot;instinvestfil&quot;      
#&gt; [19] &quot;jama&quot;                &quot;microbiology&quot;        &quot;peerj&quot;              
#&gt; [22] &quot;pensoft&quot;             &quot;plos&quot;                &quot;pnas&quot;               
#&gt; [25] &quot;royalsocchem&quot;        &quot;roysoc&quot;              &quot;sciencedirect&quot;      
#&gt; [28] &quot;scientificsocieties&quot; &quot;wiley&quot;</code></pre>
<p>The simplest approach is passing a DOI directly to <code>ft_get</code></p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="fetch.html#cb61-1"></a>(res &lt;-<span class="st"> </span><span class="kw">ft_get</span>(<span class="st">&#39;10.1371/journal.pone.0086169&#39;</span>))</span></code></pre></div>
<pre><code>#&gt; &lt;fulltext text&gt;
#&gt; [Docs] 1 
#&gt; [Source] ext - /Users/sckott/Library/Caches/R/fulltext 
#&gt; [IDs] 10.1371/journal.pone.0086169 ...</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="fetch.html#cb63-1"></a>res<span class="op">$</span>plos</span></code></pre></div>
<pre><code>#&gt; $found
#&gt; [1] 1
#&gt; 
#&gt; $dois
#&gt; [1] &quot;10.1371/journal.pone.0086169&quot;
#&gt; 
#&gt; $data
#&gt; $data$backend
#&gt; [1] &quot;ext&quot;
#&gt; 
#&gt; $data$cache_path
#&gt; [1] &quot;/Users/sckott/Library/Caches/R/fulltext&quot;
#&gt; 
#&gt; $data$path
#&gt; $data$path$`10.1371/journal.pone.0086169`
#&gt; $data$path$`10.1371/journal.pone.0086169`$path
#&gt; [1] &quot;/Users/sckott/Library/Caches/R/fulltext/10_1371_journal_pone_0086169.xml&quot;
#&gt; 
#&gt; $data$path$`10.1371/journal.pone.0086169`$id
#&gt; [1] &quot;10.1371/journal.pone.0086169&quot;
#&gt; 
#&gt; $data$path$`10.1371/journal.pone.0086169`$type
#&gt; [1] &quot;xml&quot;
#&gt; 
#&gt; $data$path$`10.1371/journal.pone.0086169`$error
#&gt; NULL
#&gt; 
#&gt; 
#&gt; 
#&gt; $data$data
#&gt; NULL
#&gt; 
#&gt; 
#&gt; $opts
#&gt; $opts$doi
#&gt; [1] &quot;10.1371/journal.pone.0086169&quot;
#&gt; 
#&gt; $opts$type
#&gt; [1] &quot;xml&quot;
#&gt; 
#&gt; $opts$progress
#&gt; [1] FALSE
#&gt; 
#&gt; 
#&gt; $errors
#&gt;                             id error
#&gt; 1 10.1371/journal.pone.0086169  &lt;NA&gt;</code></pre>
<p>You can pass many DOIs in at once</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="fetch.html#cb65-1"></a>(res &lt;-<span class="st"> </span><span class="kw">ft_get</span>(<span class="kw">c</span>(<span class="st">&#39;10.3389/fphar.2014.00109&#39;</span>, <span class="st">&#39;10.3389/feart.2015.00009&#39;</span>)))</span></code></pre></div>
<pre><code>#&gt; &lt;fulltext text&gt;
#&gt; [Docs] 2 
#&gt; [Source] ext - /Users/sckott/Library/Caches/R/fulltext 
#&gt; [IDs] 10.3389/fphar.2014.00109 10.3389/feart.2015.00009 ...</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="fetch.html#cb67-1"></a>res<span class="op">$</span>frontiersin</span></code></pre></div>
<pre><code>#&gt; $found
#&gt; [1] 2
#&gt; 
#&gt; $dois
#&gt; [1] &quot;10.3389/fphar.2014.00109&quot; &quot;10.3389/feart.2015.00009&quot;
#&gt; 
#&gt; $data
#&gt; $data$backend
#&gt; [1] &quot;ext&quot;
#&gt; 
#&gt; $data$cache_path
#&gt; [1] &quot;/Users/sckott/Library/Caches/R/fulltext&quot;
#&gt; 
#&gt; $data$path
#&gt; $data$path$`10.3389/fphar.2014.00109`
#&gt; $data$path$`10.3389/fphar.2014.00109`$path
#&gt; [1] &quot;/Users/sckott/Library/Caches/R/fulltext/10_3389_fphar_2014_00109.xml&quot;
#&gt; 
#&gt; $data$path$`10.3389/fphar.2014.00109`$id
#&gt; [1] &quot;10.3389/fphar.2014.00109&quot;
#&gt; 
#&gt; $data$path$`10.3389/fphar.2014.00109`$type
#&gt; [1] &quot;xml&quot;
#&gt; 
#&gt; $data$path$`10.3389/fphar.2014.00109`$error
#&gt; NULL
#&gt; 
#&gt; 
#&gt; $data$path$`10.3389/feart.2015.00009`
#&gt; $data$path$`10.3389/feart.2015.00009`$path
#&gt; [1] &quot;/Users/sckott/Library/Caches/R/fulltext/10_3389_feart_2015_00009.xml&quot;
#&gt; 
#&gt; $data$path$`10.3389/feart.2015.00009`$id
#&gt; [1] &quot;10.3389/feart.2015.00009&quot;
#&gt; 
#&gt; $data$path$`10.3389/feart.2015.00009`$type
#&gt; [1] &quot;xml&quot;
#&gt; 
#&gt; $data$path$`10.3389/feart.2015.00009`$error
#&gt; NULL
#&gt; 
#&gt; 
#&gt; 
#&gt; $data$data
#&gt; NULL
#&gt; 
#&gt; 
#&gt; $opts
#&gt; $opts$dois
#&gt; [1] &quot;10.3389/fphar.2014.00109&quot; &quot;10.3389/feart.2015.00009&quot;
#&gt; 
#&gt; $opts$type
#&gt; [1] &quot;xml&quot;
#&gt; 
#&gt; $opts$progress
#&gt; [1] FALSE
#&gt; 
#&gt; 
#&gt; $errors
#&gt;                         id error
#&gt; 1 10.3389/fphar.2014.00109  &lt;NA&gt;
#&gt; 2 10.3389/feart.2015.00009  &lt;NA&gt;</code></pre>
</div>
<div id="fetch-errors" class="section level2">
<h2><span class="header-section-number">9.4</span> Errors</h2>
<p><code>ft_get()</code> for each article has an <code>error</code> slot.</p>
<p>If the <code>error</code> slot is <code>NULL</code> then there is no error.</p>
<p>If the <code>error</code> slot is not <code>NULL</code> there was an error, and the error message
will be a character string in that slot.</p>
<p>Possible errors include:</p>
<ul>
<li>An error reported by the web service
<ul>
<li>e.g. “Timeout was reached: Connection timed out after 10003 milliseconds”</li>
</ul></li>
<li>No link found
<ul>
<li>e.g. “no link found from Crossref” OR “has no link available”</li>
</ul></li>
<li>We attempted to fetch the article but the content type wasn’t what was expected. In this case we skip to the next article.
<ul>
<li>e.g. “type was supposed to be <code>pdf</code>, but was <code>text/html; charset=UTF-8</code>”</li>
</ul></li>
<li>Weird uninformative errors
<ul>
<li>e.g. “Recv failure: Operation timed out” OR “Operation was aborted by an application callback”</li>
</ul></li>
<li>An error associated mostly with PLOS. PLOS gives DOIs for parts of articles, like figures, so it doesn’t make sense to get full text of a figure.
<ul>
<li>e.g., “was not found or may be a DOI for a part of an article”</li>
</ul></li>
</ul>
<p>An additional top level slot called <code>errors</code> has a data.frame of all errors
from each article, like:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="fetch.html#cb69-1"></a>res &lt;-<span class="st"> </span><span class="kw">ft_get</span>(<span class="kw">c</span>(<span class="st">&#39;10.7554/eLife.03032&#39;</span>, <span class="st">&#39;10.7554/eLife.aaaa&#39;</span>), <span class="dt">from =</span> <span class="st">&quot;elife&quot;</span>)</span>
<span id="cb69-2"><a href="fetch.html#cb69-2"></a>res<span class="op">$</span>elife<span class="op">$</span>errors</span>
<span id="cb69-3"><a href="fetch.html#cb69-3"></a>                   id                   error</span>
<span id="cb69-4"><a href="fetch.html#cb69-4"></a><span class="dv">1</span> <span class="fl">10.7554</span><span class="op">/</span>eLife<span class="fl">.03032</span>                    <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span></span>
<span id="cb69-5"><a href="fetch.html#cb69-5"></a><span class="dv">2</span>  <span class="fl">10.7554</span><span class="op">/</span>eLife.aaaa subscript out of bounds</span></code></pre></div>
<p>Where the second DOI was invalid. Granted the error in the data.frame “subscript out of bounds”
isn’t very informative, but we can work on that.</p>
</div>
<div id="fetch-cleanup" class="section level2">
<h2><span class="header-section-number">9.5</span> Cleanup</h2>
<p>The above section about errors suggests that we often run into errors. When we run into errors
downloading full text we capture the error message, if there is one, and delete the file we
were trying to create. That is, we cleanup upon hitting an error such that you shouldn’t end
up with blank files on your machine. Let us know if this isn’t true in your case and we’ll
get it fixed.</p>
<p>Note that even if you exit out of the all to <code>ft_get()</code> it should clean up a file
if it is not completey done creating it, so you shouldn’t end up with bad files
if you exit out of the function when it’s running.</p>
</div>
<div id="fetch-internals" class="section level2">
<h2><span class="header-section-number">9.6</span> Internals</h2>
<p>What’s going on under the hood in <code>ft_get()</code>? It goes like this:</p>
<ul>
<li>If you request data from a specific data source (use of <code>from</code>, only allowed for PLOS, Entrez, eLife, Pensoft, arXiv, BiorXiv, Elsevier and Wiley):
<ul>
<li>Grab publisher specific collector function</li>
<li>Each of these functions has specific code for that publisher to pull full text given an article identifier</li>
</ul></li>
<li>If you don’t request a specific data source:
<ul>
<li>Guess which publisher the DOI comes from</li>
<li>If publisher discovered that we have plugins for
<ul>
<li>Get publisher specific collector function</li>
</ul></li>
<li>If publisher not discovered
<ul>
<li>Ping the <a href="https://ftdoi.org" class="uri">https://ftdoi.org</a> API</li>
<li>If publisher found with ftdoi API:
<ul>
<li>Link for full text used from the ftdoi API response</li>
</ul></li>
<li>If publisher not found with ftdoi API:
<ul>
<li>Attempt fetch via Crossref API - if links found we try those, some work and some don’t</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
<div id="fetch-notes" class="section level2">
<h2><span class="header-section-number">9.7</span> Notes about specific data sources</h2>
<div id="elsevier" class="section level3">
<h3><span class="header-section-number">9.7.1</span> Elsevier</h3>
<p>When you don’t have access to the full text of Elsevier articles they will
often still give you something, but it will sometimes be just metadata
of the paper or sometimes an abstract if you’re lucky. When you go to extract
the text this will be rather obvious.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="links.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="chunks.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ropensci-books/fulltext/edit/master/08-fetch.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
