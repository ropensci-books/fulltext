<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 10 Extracting text | fulltext manual</title>
  <meta name="description" content="Chapter 10 Extracting text | fulltext manual" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 10 Extracting text | fulltext manual" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Chapter 10 Extracting text | fulltext manual" />
  <meta name="github-repo" content="ropensci-books/fulltext" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 10 Extracting text | fulltext manual" />
  
  <meta name="twitter:description" content="Chapter 10 Extracting text | fulltext manual" />
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="fetch.html"/>
<link rel="next" href="on-disk.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">fulltext manual</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> fulltext manual</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#info"><i class="fa fa-check"></i><b>1.1</b> Info</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#citing-fulltext"><i class="fa fa-check"></i><b>1.2</b> Citing fulltext</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#installation"><i class="fa fa-check"></i><b>1.3</b> Installation</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>2</b> Introduction</a>
<ul>
<li class="chapter" data-level="2.1" data-path="intro.html"><a href="intro.html#user-interface"><i class="fa fa-check"></i><b>2.1</b> User interface</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>3</b> Data sources</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-sources.html"><a href="data-sources.html#ds-search"><i class="fa fa-check"></i><b>3.1</b> Search</a></li>
<li class="chapter" data-level="3.2" data-path="data-sources.html"><a href="data-sources.html#ds-abstracts"><i class="fa fa-check"></i><b>3.2</b> Abstracts</a></li>
<li class="chapter" data-level="3.3" data-path="data-sources.html"><a href="data-sources.html#ds-link"><i class="fa fa-check"></i><b>3.3</b> Links</a></li>
<li class="chapter" data-level="3.4" data-path="data-sources.html"><a href="data-sources.html#ds-fulltext"><i class="fa fa-check"></i><b>3.4</b> Getting full text</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="authentication.html"><a href="authentication.html"><i class="fa fa-check"></i><b>4</b> Authentication</a></li>
<li class="chapter" data-level="5" data-path="rate-limits.html"><a href="rate-limits.html"><i class="fa fa-check"></i><b>5</b> Rate limits</a></li>
<li class="chapter" data-level="6" data-path="search.html"><a href="search.html"><i class="fa fa-check"></i><b>6</b> Search</a>
<ul>
<li class="chapter" data-level="6.1" data-path="search.html"><a href="search.html#search-usage"><i class="fa fa-check"></i><b>6.1</b> Usage</a></li>
<li class="chapter" data-level="6.2" data-path="search.html"><a href="search.html#search-many-sources"><i class="fa fa-check"></i><b>6.2</b> Search many sources</a></li>
<li class="chapter" data-level="6.3" data-path="search.html"><a href="search.html#search-options"><i class="fa fa-check"></i><b>6.3</b> Search options</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="abstracts.html"><a href="abstracts.html"><i class="fa fa-check"></i><b>7</b> Abstracts</a>
<ul>
<li class="chapter" data-level="7.1" data-path="abstracts.html"><a href="abstracts.html#abstracts-usage"><i class="fa fa-check"></i><b>7.1</b> Usage</a></li>
<li class="chapter" data-level="7.2" data-path="abstracts.html"><a href="abstracts.html#abstracts-by-ids"><i class="fa fa-check"></i><b>7.2</b> By Ids</a></li>
<li class="chapter" data-level="7.3" data-path="abstracts.html"><a href="abstracts.html#abstracts-options"><i class="fa fa-check"></i><b>7.3</b> Abstracts options</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="links.html"><a href="links.html"><i class="fa fa-check"></i><b>8</b> Links</a>
<ul>
<li class="chapter" data-level="8.1" data-path="links.html"><a href="links.html#links-usage"><i class="fa fa-check"></i><b>8.1</b> Usage</a></li>
<li class="chapter" data-level="8.2" data-path="links.html"><a href="links.html#links-options"><i class="fa fa-check"></i><b>8.2</b> Links options</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="fetch.html"><a href="fetch.html"><i class="fa fa-check"></i><b>9</b> Fetch</a>
<ul>
<li class="chapter" data-level="9.1" data-path="fetch.html"><a href="fetch.html#fetch-data-formats"><i class="fa fa-check"></i><b>9.1</b> Data formats</a></li>
<li class="chapter" data-level="9.2" data-path="fetch.html"><a href="fetch.html#how-data-is-stored"><i class="fa fa-check"></i><b>9.2</b> How data is stored</a></li>
<li class="chapter" data-level="9.3" data-path="fetch.html"><a href="fetch.html#fetch-usage"><i class="fa fa-check"></i><b>9.3</b> Usage</a></li>
<li class="chapter" data-level="9.4" data-path="fetch.html"><a href="fetch.html#fetch-errors"><i class="fa fa-check"></i><b>9.4</b> Errors</a></li>
<li class="chapter" data-level="9.5" data-path="fetch.html"><a href="fetch.html#fetch-cleanup"><i class="fa fa-check"></i><b>9.5</b> Cleanup</a></li>
<li class="chapter" data-level="9.6" data-path="fetch.html"><a href="fetch.html#fetch-internals"><i class="fa fa-check"></i><b>9.6</b> Internals</a></li>
<li class="chapter" data-level="9.7" data-path="fetch.html"><a href="fetch.html#fetch-notes"><i class="fa fa-check"></i><b>9.7</b> Notes about specific data sources</a>
<ul>
<li class="chapter" data-level="9.7.1" data-path="fetch.html"><a href="fetch.html#elsevier"><i class="fa fa-check"></i><b>9.7.1</b> Elsevier</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="chunks.html"><a href="chunks.html"><i class="fa fa-check"></i><b>10</b> Extracting text</a>
<ul>
<li class="chapter" data-level="10.1" data-path="chunks.html"><a href="chunks.html#chunks-usage"><i class="fa fa-check"></i><b>10.1</b> Usage</a></li>
<li class="chapter" data-level="10.2" data-path="chunks.html"><a href="chunks.html#chunks-tabularize"><i class="fa fa-check"></i><b>10.2</b> Tabularize</a></li>
<li class="chapter" data-level="10.3" data-path="chunks.html"><a href="chunks.html#chunks-other-inputs"><i class="fa fa-check"></i><b>10.3</b> Other inputs</a>
<ul>
<li class="chapter" data-level="10.3.1" data-path="chunks.html"><a href="chunks.html#files"><i class="fa fa-check"></i><b>10.3.1</b> Files</a></li>
<li class="chapter" data-level="10.3.2" data-path="chunks.html"><a href="chunks.html#xml-in-a-string"><i class="fa fa-check"></i><b>10.3.2</b> xml in a string</a></li>
<li class="chapter" data-level="10.3.3" data-path="chunks.html"><a href="chunks.html#xml2-objects"><i class="fa fa-check"></i><b>10.3.3</b> xml2 objects</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="on-disk.html"><a href="on-disk.html"><i class="fa fa-check"></i><b>11</b> Summarize articles on disk</a>
<ul>
<li class="chapter" data-level="11.1" data-path="on-disk.html"><a href="on-disk.html#ft_table-usage"><i class="fa fa-check"></i><b>11.1</b> Usage</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="curl-options.html"><a href="curl-options.html"><i class="fa fa-check"></i><b>12</b> Request debugging/inspection</a></li>
<li class="chapter" data-level="13" data-path="use-cases.html"><a href="use-cases.html"><i class="fa fa-check"></i><b>13</b> Use cases</a></li>
<li class="chapter" data-level="14" data-path="session-info.html"><a href="session-info.html"><i class="fa fa-check"></i><b>14</b> session info</a></li>
<li class="divider"></li>
<li><a href="https://github.com/ropensci-books/fulltext" target="blank">(c) Scott Chamberlain, 2020</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">fulltext manual</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="chunks" class="section level1">
<h1><span class="header-section-number">Chapter 10</span> Extracting text</h1>
<p>Functions for extracting parts of texts used to live inside of <code>fulltext</code>, but have now
moved to the package <a href="https://github.com/ropensci/pubchunks/">pubchunks</a>.</p>
<p>The <code>pubchunks::pub_chunks</code> function tries to make it easy to extract the parts of
articles you want. This only works with XML format articles though since although
we can get text out of PDFs, there is no machine readable way to say
“I want the abstract”.</p>
<p>In addition to only working with XML, this function only has knowledge about a
select set of publishers for which we’ve encoded knowledge about how to get different
sections of the article. Not all publishers use the same format XML - so each publisher is
slightly different for how to get to each section. That is, to get to the abstract
requires slightly different xpath for publisher A vs. publisher B vs. publisher C.</p>
<p>An alternative to <code>pubchunks</code> is to use xpath or css selectors yourself to slice and
dice XML.</p>
<div id="chunks-usage" class="section level2">
<h2><span class="header-section-number">10.1</span> Usage</h2>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="chunks.html#cb70-1"></a><span class="kw">library</span>(fulltext)</span>
<span id="cb70-2"><a href="chunks.html#cb70-2"></a><span class="kw">library</span>(pubchunks)</span></code></pre></div>
<p>Get a full text article</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="chunks.html#cb71-1"></a>x &lt;-<span class="st"> </span><span class="kw">ft_get</span>(<span class="st">&#39;10.1371/journal.pone.0086169&#39;</span>, <span class="dt">from=</span><span class="st">&#39;plos&#39;</span>)</span></code></pre></div>
<p>Note that unlike previous versions of <code>fulltext</code> you now have to collect (<code>ft_collect()</code>)
the text from the XML file on disk. Then you can pass to <code>pub_chunks()</code>, here to get
authors.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="chunks.html#cb72-1"></a>x <span class="op">%&gt;%</span><span class="st"> </span>ft_collect <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pub_chunks</span>(<span class="st">&quot;authors&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; $plos
#&gt; $plos$`10.1371/journal.pone.0086169`
#&gt; &lt;pub chunks&gt;
#&gt;   from: xml_document
#&gt;   publisher/journal: plos/PLoS ONE
#&gt;   sections: authors
#&gt;   showing up to first 5: 
#&gt;    authors (n=4): nested list
#&gt; 
#&gt; 
#&gt; attr(,&quot;ft_data&quot;)
#&gt; [1] TRUE</code></pre>
<p>In another example, let’s search for PLOS articles.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="chunks.html#cb74-1"></a><span class="kw">library</span>(<span class="st">&quot;rplos&quot;</span>)</span>
<span id="cb74-2"><a href="chunks.html#cb74-2"></a>(dois &lt;-<span class="st"> </span><span class="kw">searchplos</span>(<span class="dt">q=</span><span class="st">&quot;*:*&quot;</span>, <span class="dt">fl=</span><span class="st">&#39;id&#39;</span>,</span>
<span id="cb74-3"><a href="chunks.html#cb74-3"></a>   <span class="dt">fq=</span><span class="kw">list</span>(<span class="st">&#39;doc_type:full&#39;</span>,<span class="st">&quot;article_type:</span><span class="ch">\&quot;</span><span class="st">research article</span><span class="ch">\&quot;</span><span class="st">&quot;</span>),</span>
<span id="cb74-4"><a href="chunks.html#cb74-4"></a>     <span class="dt">limit=</span><span class="dv">5</span>)<span class="op">$</span>data<span class="op">$</span>id)</span></code></pre></div>
<pre><code>#&gt; [1] &quot;10.1371/journal.pone.0020843&quot; &quot;10.1371/journal.pone.0022257&quot;
#&gt; [3] &quot;10.1371/journal.pone.0023139&quot; &quot;10.1371/journal.pone.0023138&quot;
#&gt; [5] &quot;10.1371/journal.pone.0023119&quot;</code></pre>
<p>Then get the full text</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="chunks.html#cb76-1"></a>x &lt;-<span class="st"> </span><span class="kw">ft_get</span>(dois, <span class="dt">from=</span><span class="st">&quot;plos&quot;</span>)</span></code></pre></div>
<p>Then pull out various sections of each article.</p>
<blockquote>
<p>remember to pull out the full text first</p>
</blockquote>
<div class="sourceCode" id="cb77"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb77-1"><a href="chunks.html#cb77-1"></a>x &lt;-<span class="st"> </span><span class="kw">ft_collect</span>(x)</span></code></pre></div>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="chunks.html#cb78-1"></a>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pub_chunks</span>(<span class="st">&quot;front&quot;</span>)</span>
<span id="cb78-2"><a href="chunks.html#cb78-2"></a>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pub_chunks</span>(<span class="st">&quot;body&quot;</span>)</span>
<span id="cb78-3"><a href="chunks.html#cb78-3"></a>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pub_chunks</span>(<span class="st">&quot;back&quot;</span>)</span>
<span id="cb78-4"><a href="chunks.html#cb78-4"></a>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pub_chunks</span>(<span class="st">&quot;history&quot;</span>)</span>
<span id="cb78-5"><a href="chunks.html#cb78-5"></a>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pub_chunks</span>(<span class="st">&quot;authors&quot;</span>)</span>
<span id="cb78-6"><a href="chunks.html#cb78-6"></a>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pub_chunks</span>(<span class="kw">c</span>(<span class="st">&quot;doi&quot;</span>,<span class="st">&quot;categories&quot;</span>))</span>
<span id="cb78-7"><a href="chunks.html#cb78-7"></a>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pub_chunks</span>(<span class="st">&quot;all&quot;</span>)</span>
<span id="cb78-8"><a href="chunks.html#cb78-8"></a>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pub_chunks</span>(<span class="st">&quot;publisher&quot;</span>)</span>
<span id="cb78-9"><a href="chunks.html#cb78-9"></a>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pub_chunks</span>(<span class="st">&quot;acknowledgments&quot;</span>)</span>
<span id="cb78-10"><a href="chunks.html#cb78-10"></a>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pub_chunks</span>(<span class="st">&quot;permissions&quot;</span>)</span>
<span id="cb78-11"><a href="chunks.html#cb78-11"></a>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pub_chunks</span>(<span class="st">&quot;journal_meta&quot;</span>)</span>
<span id="cb78-12"><a href="chunks.html#cb78-12"></a>x <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">pub_chunks</span>(<span class="st">&quot;article_meta&quot;</span>)</span></code></pre></div>
</div>
<div id="chunks-tabularize" class="section level2">
<h2><span class="header-section-number">10.2</span> Tabularize</h2>
<p>The function <code>pub_tabularize()</code> is useful for coercing the output of <code>pub_chunks()</code> into a data.frame,
the lingua franca of data work in R.</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="chunks.html#cb79-1"></a><span class="kw">library</span>(data.table)</span>
<span id="cb79-2"><a href="chunks.html#cb79-2"></a>x &lt;-<span class="st"> </span><span class="kw">pub_chunks</span>(x, <span class="kw">c</span>(<span class="st">&quot;doi&quot;</span>, <span class="st">&quot;title&quot;</span>))</span>
<span id="cb79-3"><a href="chunks.html#cb79-3"></a>x &lt;-<span class="st"> </span><span class="kw">pub_tabularize</span>(x)</span>
<span id="cb79-4"><a href="chunks.html#cb79-4"></a><span class="kw">rbindlist</span>(x<span class="op">$</span>plos, <span class="dt">fill =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>#&gt;                             doi
#&gt; 1: 10.1371/journal.pone.0020843
#&gt; 2: 10.1371/journal.pone.0022257
#&gt; 3: 10.1371/journal.pone.0023139
#&gt; 4: 10.1371/journal.pone.0023138
#&gt; 5: 10.1371/journal.pone.0023119
#&gt;                                                                                                                                     title
#&gt; 1:          New Insights into the Evolution of Wolbachia Infections in Filarial Nematodes Inferred from a Large Range of Screened Species
#&gt; 2:                         Dynamic Distribution of Nuclear Coactivator 4 during Mitosis: Association with Mitotic Apparatus and Midbodies
#&gt; 3:     Contrasting Expression of Canonical Wnt Signaling Reporters TOPGAL, BATGAL and Axin2LacZ during Murine Lung Development and Repair
#&gt; 4:                 Regrets Associated with Providing Healthcare: Qualitative Study of Experiences of Hospital-Based Physicians and Nurses
#&gt; 5: Strategies for Enhancing the Accumulation and Retention of Extracellular Matrix in Tissue-Engineered Cartilage Cultured in Bioreactors
#&gt;    .publisher
#&gt; 1:       plos
#&gt; 2:       plos
#&gt; 3:       plos
#&gt; 4:       plos
#&gt; 5:       plos</code></pre>
</div>
<div id="chunks-other-inputs" class="section level2">
<h2><span class="header-section-number">10.3</span> Other inputs</h2>
<p><code>pub_chunks()</code> works with other inputs besides the output of <code>fulltext::ft_get()</code>.</p>
<div id="files" class="section level3">
<h3><span class="header-section-number">10.3.1</span> Files</h3>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="chunks.html#cb81-1"></a>x &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;examples/10_1016_0021_8928_59_90156_x.xml&quot;</span>, </span>
<span id="cb81-2"><a href="chunks.html#cb81-2"></a>  <span class="dt">package =</span> <span class="st">&quot;pubchunks&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="chunks.html#cb82-1"></a><span class="kw">pub_chunks</span>(x, <span class="st">&quot;abstract&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; &lt;pub chunks&gt;
#&gt;   from: file
#&gt;   publisher/journal: elsevier/Journal of Applied Mathematics and Mechanics
#&gt;   sections: abstract
#&gt;   showing up to first 5: 
#&gt;    abstract (n=1): Abstract
#&gt;                
#&gt;                   This pa ...</code></pre>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="chunks.html#cb84-1"></a><span class="kw">pub_chunks</span>(x, <span class="st">&quot;title&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; &lt;pub chunks&gt;
#&gt;   from: file
#&gt;   publisher/journal: elsevier/Journal of Applied Mathematics and Mechanics
#&gt;   sections: title
#&gt;   showing up to first 5: 
#&gt;    title (n=1): On the driving of a piston with a rigid collar int ...</code></pre>
<div class="sourceCode" id="cb86"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb86-1"><a href="chunks.html#cb86-1"></a><span class="kw">pub_chunks</span>(x, <span class="st">&quot;authors&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; &lt;pub chunks&gt;
#&gt;   from: file
#&gt;   publisher/journal: elsevier/Journal of Applied Mathematics and Mechanics
#&gt;   sections: authors
#&gt;   showing up to first 5: 
#&gt;    authors (n=1): Chetaev, D.N</code></pre>
<div class="sourceCode" id="cb88"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb88-1"><a href="chunks.html#cb88-1"></a><span class="kw">pub_chunks</span>(x, <span class="kw">c</span>(<span class="st">&quot;title&quot;</span>, <span class="st">&quot;refs&quot;</span>))</span></code></pre></div>
<pre><code>#&gt; &lt;pub chunks&gt;
#&gt;   from: file
#&gt;   publisher/journal: elsevier/Journal of Applied Mathematics and Mechanics
#&gt;   sections: title, refs
#&gt;   showing up to first 5: 
#&gt;    title (n=1): On the driving of a piston with a rigid collar int ...
#&gt;    refs (n=6): 1.G.N.WatsonTeoriia besselevykh funktsiiTheory of</code></pre>
<p>The output of <code>pub_chunks()</code> is a list with an S3 class <code>pub_chunks</code> to make
internal work in the package easier. You can easily see the list structure
by using <code>unclass()</code>.</p>
</div>
<div id="xml-in-a-string" class="section level3">
<h3><span class="header-section-number">10.3.2</span> xml in a string</h3>
<div class="sourceCode" id="cb90"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb90-1"><a href="chunks.html#cb90-1"></a>xml &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="kw">readLines</span>(x), <span class="dt">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb90-2"><a href="chunks.html#cb90-2"></a><span class="kw">pub_chunks</span>(xml, <span class="st">&quot;title&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; &lt;pub chunks&gt;
#&gt;   from: character
#&gt;   publisher/journal: elsevier/Journal of Applied Mathematics and Mechanics
#&gt;   sections: title
#&gt;   showing up to first 5: 
#&gt;    title (n=1): On the driving of a piston with a rigid collar int ...</code></pre>
</div>
<div id="xml2-objects" class="section level3">
<h3><span class="header-section-number">10.3.3</span> xml2 objects</h3>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="chunks.html#cb92-1"></a>xml &lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="kw">readLines</span>(x), <span class="dt">collapse =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb92-2"><a href="chunks.html#cb92-2"></a>xml &lt;-<span class="st"> </span>xml2<span class="op">::</span><span class="kw">read_xml</span>(xml)</span>
<span id="cb92-3"><a href="chunks.html#cb92-3"></a><span class="kw">pub_chunks</span>(xml, <span class="st">&quot;title&quot;</span>)</span></code></pre></div>
<pre><code>#&gt; &lt;pub chunks&gt;
#&gt;   from: xml_document
#&gt;   publisher/journal: elsevier/Journal of Applied Mathematics and Mechanics
#&gt;   sections: title
#&gt;   showing up to first 5: 
#&gt;    title (n=1): On the driving of a piston with a rigid collar int ...</code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="fetch.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="on-disk.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ropensci-books/fulltext/edit/master/09-chunks.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
